<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0"
      rel="stylesheet"
    />
    
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="shortcut icon" href="https://cdn.discordapp.com/attachments/1069951518637314048/1319491649210159126/ai.ico?ex=676627dc&is=6764d65c&hm=4d0e2fbab04462236e1b938fd657b63477c00278a3fe5e4f4320104b1bd99aea&" type="image/x-icon" />
    <title>Solvyze AI | Chat</title>
    <style>
       * {
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Montserrat', sans-serif;
  background: url('https://cdn.discordapp.com/attachments/1069951518637314048/1319493033108050052/bgbg.png?ex=67662926&is=6764d7a6&hm=9d183a2d88db06478f5a6a98fad6ae772004dc4a10b9a3bb428d173c039158af&') no-repeat center center fixed;
  background-size: cover;
  color: #f5f5f5;
}

main {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  height: 100vh;
  padding: 2rem 0;
  width: 100%;
}

#header {
  text-align: center;
}

#header h1 {
  color: rgba(0, 0, 0, 0.6);
}

#header img {
  width: 100px;
  margin: 0 0 0.5rem;
}

#content {
  width: 100%;
  max-width: 60%;
  padding: 1rem 0;
}

#content .initial-examples {
  display: flex; /* Mengubah grid menjadi flex untuk pusat */
  justify-content: center; /* Memusatkan secara horizontal */
  align-items: center; /* Memusatkan secara vertikal */
  height: 100px; /* Menyesuaikan tinggi untuk memusatkan konten */
  text-align: center; /* Menjaga teks tetap rata tengah */
  color: black; /* Mengubah warna teks menjadi hitam */
}

#content .initial-examples h2 {
  margin: 0; /* Menghapus margin default */
  font-size: 50px;
}

#content .initial-examples i {
  margin: 0 0 1rem;
  font-size: 20px;
  color: #10a37f;
}

#content .initial-examples h3 {
  margin: 0 0 1rem;
  color: rgba(0, 0, 0, 0.6);
}

#content .initial-examples .item-content-wrapper {
  display: flex;
  justify-content: center;
  width: 100%;
}

#content .initial-examples .item-content-wrapper:not(:last-child) {
  margin: 0 0 1rem;
}

#content .initial-examples .item-content {
  background: #40414f;
  padding: 0.8rem;
  font-size: 14px;
  border-radius: 8px;
  border: 1px solid #10a37f;
}

#content .container-question-answer {
  display: grid;
  grid-template-columns: 1fr 20fr; /* Adjusts the width of the columns */
  background: rgba(68, 70, 84, 0.7); /* Semi-transparent background for glass effect */
  backdrop-filter: blur(10px); /* Apply blur effect to the background */
  padding: 1rem; /* Padding inside the box */
  color: white; /* Text color for better contrast */
  border-radius: 6px; /* Rounded corners */
  line-height: 1.6rem;
  white-space: pre-wrap; /* Allows text to wrap and respects whitespace */
  align-items: flex-start; /* Aligns items at the start */
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); /* Optional shadow for depth */
}

#content .question {
  width: 98%;
  margin: 1rem;
  color: white;
 
}

#content .answer {
  background: rgba(68, 70, 84, 0.7); /* Semi-transparent background for glass effect */
  backdrop-filter: blur(10px); /* Apply blur effect to the background */
  padding: 1rem;
  color: white;
  margin-left: 16px;
  width: 98%;
  border-radius: 6px;
  white-space: break-spaces; /* Allows text to wrap and respects whitespace */
  align-items: flex-start;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); /* Optional shadow for depth */
}

#content .icon-chat {
  width: 28px;
}

#search-container {
  width: 60%;
  display: grid;
  margin-left: 20px;
  grid-template-columns: 10fr 1fr;
  margin: 0 auto;
  background: rgba(68, 70, 84, 0.7); /* Semi-transparent background for glass effect */
  backdrop-filter: blur(10px); /* Apply blur effect to the background */
  border-radius: 8px; /* Rounded corners */
  padding: 1rem; /* Optional padding for better spacing */
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); /* Optional shadow for depth */
}


#search-container textarea {
  outline: none;
  border: 0;
  border-radius: 8px 0 0 8px;
  height: 50px;
  padding: 0 20px;
  background: #f1f1f1;
  color: #000000;
}

#search-container textarea:focus {
  outline: none;
  border: 1px solid #10a37f;
}

#search-container button {
  border: 0;
  border-radius: 0 8px 8px 0;
  height: 50px;
  cursor: pointer;
  background: #40414f;
  color: #ffffff;
  transition: 0.5s ease-in-out;
}

#search-container button:hover {
  background: #080808;
  color: #f5f5f5;
}
#bottom-container {
  
  width: 100%;
  text-align: center;
}

#bottom-container .made-by {
  display: block;
  font-size: 12px;
  margin: 1rem 0 0;
}

#bottom-container .made-by a {
  color: black;

}

.bottom-container-chat-active {
  position: fixed;
  bottom: 0;
  padding: 1 rem 0;
  background: rgba(255, 255, 255, 0.1);
}

.content-chat-active {
  padding: 3rem 0 7rem !important;
}

@media screen and (max-width: 768px) {
  #content {
    max-width: 100%;
    padding: 1rem;
  }

  #content .initial-examples {
    grid-template-columns: 1fr;
  }

  #content .initial-examples .item-content {
    width: 100%;
  }
}

.sidebar {
  position: fixed;
  width: 230px;
  margin-top: 20px;
  margin-right: 20px;
  right: 0; /* Position the sidebar on the right */
  
  border-radius: 16px;
  background: rgba(255, 255, 255, 0.01); /* Semi-transparent background */
  backdrop-filter: blur(10px); /* Apply blur effect to the background */
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Optional shadow for depth */
  transition: all 0.4s ease;
  z-index: 100;
}

.sidebar.collapsed {
  height: 0; /* Collapsed height */
  overflow: hidden; /* Hide overflow */
}

.sidebar-header {
  display: flex;
  padding: 10px 20px; /* Adjusted padding */
  align-items: center;
  justify-content: flex-start; /* Align items to the start */
}

.sidebar-header .header-logo img {
  width: 46px;
  height: 46px;
  border-radius: 50%;
  margin-right: 10px; /* Space between icon and logout */
}

.sidebar-header .logout {
  display: flex;
  align-items: center;
  margin-left: 10px; /* Space between user icon and logout */
  cursor: pointer; /* Change cursor to pointer */
  transition: background 0.3s ease; /* Smooth background transition */
}

.sidebar-header .logout:hover {
  background: rgba(255, 255, 255, 0.1); /* Light background on hover */
  border-radius: 8px; /* Rounded corners on hover */
}

.sidebar-header .logout-icon {
  margin-right: 5px; /* Space between icon and text */
}

.sidebar-header .logout-text {
  font-weight: 600; /* Slightly bolder text */
  color: #333; /* Darker text color for contrast */
}


.sidebar-header .toggler {
  height: 35px;
  width: 35px;
  background: #fff;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  transition: 0.4s ease;
}

.sidebar-nav .nav-list {
  list-style: none;
  padding: 15px;
}

.sidebar-nav .nav-link {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 15px;
  border-radius: 8px;
  color: rgba(124, 115, 115, 0.9); /* Adjusted for transparency */
  text-decoration: none;
  transition: 0.4s ease;
}

.sidebar-nav .nav-link:hover {
  color: rgba(46, 46, 46, 0.8); /* Adjusted for transparency */
}

.sidebar-nav .nav-icon {
  font-size: 1.5rem;
}

body {
  margin-left: 1px;
  transition: margin-left 0.4s ease;
}

.sidebar.collapsed + main {
  margin-left: 85px;
}

@media (max-width: 768px) {
  .sidebar {
    width: 100%;
    height: 56px;
    position: relative;
  }

  .sidebar.collapsed {
    height: auto;
  }

  body {
    margin-left: 0;
  }
}

.made-by {
  color: black; /* Mengubah warna teks menjadi hitam */
}

.made-by a {
  color: black; /* Mengubah warna teks dalam <a> menjadi hitam */
  text-decoration: none; /* Menghapus garis bawah jika ada */
}

.made-by a:hover {
  color: black; /* Menjaga warna hitam saat link dihover */
}
 
    </style>
  </head>

  <body>
    <aside class="sidebar">
      <!-- Sidebar header -->
      <header class="sidebar-header">
        <a href="#" class="header-logo">
          <img src="{{url_for('static', filename='img/orang.png')}}" alt="Logo" />
        </a>
            
        <nav class="sidebar-nav">
            <a href="/logout" style="text-decoration: none;" class="nav-link">
                <!-- SVG inserted here -->
                <svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M17 16L21 12M21 12L17 8M21 12L7 12M13 16V17C13 18.6569 11.6569 20 10 20H6C4.34315 20 3 18.6569 3 17V7C3 5.34315 4.34315 4 6 4H10C11.6569 4 13 5.34315 13 7V8" 
                  stroke="#374151" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                </svg>
                
                <span class="">Log out</span>
                
              </a>
       
        </nav>
      </header>
    </aside>

    <main>
      <div id="header">
     
       
      </div>

           <div id="content">
            <div class="initial-examples">
                <div class="item-wrapper">
                  
                    <h2>Hello, {{ session['name'] }}</h2>   

                    </div>
                </div>
            </div>
        </div>



      <div id="bottom-container">
        <div id="search-container">
          <!-- <input id="search-input" type="" placeholder="Send a message."> -->
           <textarea id="search-input" placeholder="Send a messagge"></textarea>
          <button onclick="render()"><i class="fa-solid fa-paper-plane"></i></button>
        </div>
    
        <span class="made-by"
          >Made by
          <strong>
            <a> SOLVYZE CORP</a> </strong>
        </span>
      </div>
    </main>
    <script>
        const content = document.querySelector("#content");
const searchInput = document.querySelector("#search-input");
const initialExamples = document.querySelector(".initial-examples");
const bottomContainer = document.querySelector("#bottom-container");

searchInput.focus();

document.addEventListener("keydown", (event) => {
  if (event.code === "Enter" || event.code === "NumpadEnter") {
    render();
  }
});

function initialExamplesVisibility() {
  if (content.children.length > 0) {
    initialExamples.style.display = "none";
    content.setAttribute("class", "content-chat-active");
    bottomContainer.setAttribute("class", "bottom-container-chat-active");
  }
}

function createImage(path, className) {
  const img = document.createElement("img");
  img.setAttribute("src", path);
  img.setAttribute("class", className);

  return img;
}

function render() {
  const div = document.createElement("div");
  const text = document.createElement("div");

  text.innerText = searchInput.value;
  div.setAttribute("class", "container-question-answer question");

  const img = createImage("{{url_for('static', filename='img/orang.png')}}", "icon-chat");

  div.appendChild(img);
  div.appendChild(text);
  content.appendChild(div);

  initialExamplesVisibility();

  fetchData();

  searchInput.value = "";
}

async function fetchData() {
  const div = document.createElement("div");
  const text = document.createElement("div");

  text.innerText = "...";
  div.setAttribute("class", "container-question-answer answer");

  const img = createImage("{{url_for('static', filename='img/lynn.png')}}", "icon-chat");

  div.appendChild(img);
  div.appendChild(text);
  content.appendChild(div);

  window.scrollTo(0, document.body.scrollHeight);

  const userMessage = searchInput.value;
  try {
    const response = await fetch("/process_message", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ message: userMessage}),
    });

    const data = await response.json();
    // const res = marked.parse(data.response);
    const res = data.response;
    text.innerText = res;

    window.scrollTo(0, document.body.scrollHeight);
  } catch (error) {
    text.innerText = "Error: Unable to fetch response";
    console.error(error);
  }
}


    </script>

   
  </body>
</html>
